<!DOCTYPE html>
<html>
<head>
  <title>Hands on Work VI - Marina Guenter Kargel - Cadastro de plataforma</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&display=swap" rel="stylesheet">
</head>
<body style="background-color: lightblue">
  <div class="col-sm-4" style="margin: auto; margin-top: 10%; border-radius: 5%; padding: 10px; background-color: white">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 style="text-align: center;">Cadastro de plataforma</h3>
      </div>
      <div class="panel-body" style="margin: 10px;">
        <div class="form-group">
          <label for="nome">Nome</label>
          <input type="text" id="nome" class="form-control" />
        </div>
        <div class="form-group">
          <label for="marca">Marca</label>
          <input type="text" id="marca" class="form-control" />
        </div>
        <div class="form-group">
          <label for="portatil">Portátil</label>
          <select class="form-control" id="portatil">
            <option value="true">Sim</option>
            <option value="false">Não</option>
          </select>
        </div>
      </div>
      <div class="panel-footer">
        <div class="row">
          <div class="col-sm-6" style="display: flex; justify-content: flex-end">
            <button type="button" id="goBackButton" class="btn btn-primary" onclick="goBack();">Voltar</button>
          </div>
          <div class="col-sm-6">
            <button type="button" id="saveButton" class="btn btn-primary" onclick="savePlataforma();">Salvar</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
     var Plataforma = {
      nome: String,
      marca: String,
      portatil: Boolean
    }

    function goBack() {
      window.location.href="tabelas.html"; 
    }
    
    function savePlataforma() {
      Plataforma = new Object();
      Plataforma.nome = $("#nome").val();
      Plataforma.marca = $("#marca").val();
      Plataforma.portatil = $("#portatil").val();

      $.ajax({
        url: "http://localhost:8080/api/v1/plataforma",
        type: 'POST',
        contentType: "application/json;charset=utf-8",
        data: JSON.stringify(Plataforma),
        success: function (Plataforma) {
          goBack(); 
        }
      });
    }
  </script>
</body>
</html>